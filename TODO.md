# TODO

## 次のタスク

### COMPASS × Google Chat × Googleドライブ 連携（案件作成の二度手間解消）

#### ゴール
COMPASSでプロジェクト（案件）を作成したら、同時に
- Googleドライブ：案件フォルダ作成
- Google Chat：案件スペース作成
を行い、**各URLをCOMPASSのプロジェクトに保存してワンクリックで飛べる**ようにする。

#### 基本方針
- 連携は **org（組織）単位**でON/OFF・ルール設定できるようにする（「使いたい組織だけ各々セット」）。
- **プロジェクトのオーナーorgが連携ONのときだけ** 自動作成する。
- 招待された側（参加者側）は原則「作らない」。オーナーが作ったChat/Driveのリンクに乗る。

#### MVP（まず作る）
1) **org設定（Google連携設定画面）**
- Drive
  - enabled
  - parentFolderId（共有ドライブ内のフォルダID等）
  - folderNameTemplate（例：`{projectType}_{projectName}`）
- Chat
  - enabled
  - spaceNameTemplate（例：`【COMPASS】{projectName}`）
  - （任意）初期メッセージテンプレ（COMPASSプロジェクトURL等）
- memberSyncMode（まずは `none` / `addOnly` のみ）

2) **プロジェクト作成時の自動作成**（オーナーorgがONの場合）
- Driveフォルダ作成 → `driveFolderUrl` をプロジェクトに保存
- Chatスペース作成 → `chatSpaceUrl` をプロジェクトに保存
- プロジェクト画面から「Driveを開く」「Chatを開く」導線を追加

3) **Chatの招待メンバー選択（PJ単位）**
- PJ設定に「Chatに招待するメンバー（メール）」のマルチセレクト（チェック）を追加
- まずは addOnly（追加のみ）で招待
- Googleメールが未設定のメンバーはスキップ＋警告表示

#### Phase2（運用しながら拡張）
- memberSyncModeを拡張：`addAndRemove`（削除同期）
- Drive共有権限の自動同期（PJメンバー→フォルダ共有）
- 招待された側のオプション（必要なら）：個人/自組織用の「ミラー作成」


## 完了

### プロジェクト種別ごとのマイルストーン設定（実装済み: 2026-01-15〜2026-01-16 / d8ce01d, 4344d17）

プロジェクト作成時に種別を選択し、種別ごとに異なるマイルストーンを設定できるようにする。

**種別案:**

| 種別 | マイルストーン |
|------|---------------|
| 内装案件 | 現地調査→レイアウト確定→基本設計→設計施工現調→見積確定→着工→中間検査→竣工→引渡し（現状） |
| 新築案件 | 企画→基本設計→実施設計→確認申請→着工→上棟→竣工→引渡し |
| 開発/企画 | 企画→提案→承認→完了 |
| SNS | 企画→制作→投稿→分析 |
| セミナー/イベント | 企画→準備→集客→開催→フォロー |
| その他 | 未着手→進行中→完了（手動） |

**実装内容:**
1. プロジェクトに `projectType` フィールドを追加
2. 種別ごとのマイルストーンテンプレートを定義
3. プロジェクト作成/編集画面で種別に応じたマイルストーンフィールドを表示
4. ステータス自動計算を種別ごとのマイルストーンに対応

**備考:**
- 種別は後から追加できるようにする
- 将来的にはカスタムマイルストーンも検討
